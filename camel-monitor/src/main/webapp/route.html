<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
	<style>

.active {
  stroke: #000;
  stroke-width: 2px;
}

.rect {
  pointer-events: all;
  stroke: none;
  stroke-width: 40px;
}

</style>


	<script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>
	<a href="javascript:addEndpoint()">endpoint</a>
	<script>

var color = d3.scaleOrdinal(d3.schemeCategory20);

		var margin = {top: 10, right: 10, bottom: 30, left: 10},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

/*
		var rectangles = d3.range(1).map(function() {
		  return {
		    x: Math.round(Math.random() * (width)),
		    y: Math.round(Math.random() * (height))
		  };
		});
*/
		var rectangles = [
			{"x":10, "y":10}
		]
       
		var svg = d3.select("body").append("svg")
	    .attr("width", width + margin.left + margin.right)
	    .attr("height", height + margin.top + margin.bottom);

	    var g = svg.selectAll('g')
				.data(rectangles).enter().append("g")	
				.attr("transform", "translate(" + margin.left + "," + margin.top + ")")
				.call(d3.drag()
					.on("start", dragstarted)
					.on("drag", dragged)
					.on("end", dragended));
		
		function addEndpoint() {

			
			g.append("rect")
		     .attr("x", function(d) { return d.x; })
		     .attr("y", function(d) { return d.y; })
		     .attr("height", 60)
		     .attr("width", 30)
		     .attr("id", Math.random())
		     .style("fill", function(d, i) { return color(i); });
			
		
		}


		function dragstarted(d) {
		  d3.select(this).raise().classed("active", true);
		}

		function dragged(d) {

		    d.x = d3.event.x;
		    d.y = d3.event.y;
		    
		    d3.select("g").attr("transform", "translate(" + d.x + ", " + d.y + ")");
		  
		}

		function dragended(d) {
		  d3.select(this).classed("active", false);
		}
		
	


	</script>
	
	
</body>
</html>
